<!DOCTYPE html>
<html>
    <head>
        <title>First App</title>
    </head>
    <body onload='loadData()'>
        <form action = "http://localhost:5000/addUser" method = "POST">
            Image Source: <input type = "text" name = "img_url" id='imgUrl'>  <br>
            Name: <input type = "text" name = "name" id='name'>  <br>
            Price: <input type = "text" name = "price" id='price'>  <br>
            Retail Price: <input type = "text" name = "retail_price" id='retailPrice'>  <br>
            Discount: <input type = "text" name = "discount" id='discount'>  <br>
            <input type = "submit" value = "Submit" onclick='addUser()'>
        </form>
        <table>
            <thead>
                <tr>
                    <td>Image</td>
                    <td>Name</td>
                    <td>Price</td>
                    <td>Retail Price</td>
                    <td>Discout</td>
                </tr>
            </thead>
            <tbody id='my-data'>

            </tbody>
        </table>
        <script>
            function loadData() {
                fetch('http://localhost:5000/product.json').then(function (res) {
                    return res.json();
                }).then(function (myJson) {
                    console.log(JSON.stringify(myJson));
                    let tableLines = ''
                    myJson.data.forEach(item => {
                        tableLines +=
                        `
                        <tr>
                            <td><img src='${item.indexImgUrl}' width='auto' height='160px'/></td>
                            <td>${item.name}</td>
                            <td>${item.price}</td>
                            <td>${item.retailPrice}</td>
                            <td>${item.discount}</td>
                        </tr>

                        `
                    })
                    document.querySelector('#my-data').innerHTML = tableLines
                })
            }
            function addUser () {
                var imgUrl = document.querySelector('#imgUrl').value
                var name = document.querySelector('#name').value
                var price = document.querySelector('#price').value
                var retailPrice = document.querySelector('#retailPrice').value
                var discount = document.querySelector('#discount').value

                var newUser = {
                    "data" :
                    [{
                        imgUrl,
                        name,
                        price,
                        retailPrice,
                        discount
                    }]
                }
            }
        </script>
    </body>
</html>